<app-back-button></app-back-button>

<div class="page">
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex align-items-center">
        <h2 class="page-title mb-0">Novità</h2>
      </div>
    </div>
  </div>

  @if (isLoading()) {
    <div class="mt-3">
      <h3>Caricamento novità in corso...</h3>
    </div>
  }

  <p-paginator
    [rows]="pageSize"
    [totalRecords]="news().length"
    [rowsPerPageOptions]="[15, 30, 50]"
    (onPageChange)="onPageEvent($event)"
    [showFirstLastIcon]="true"
    [first]="first"
    class="mt-1 mb-1"
    [hidden]="news().length === 0"
  ></p-paginator>

  <div class="table-container">
    <p-table
      [value]="displayedData"
      class="news-table"
      [paginator]="false"
      [rows]="pageSize"
      styleClass="p-datatable-striped"
      [tableStyle]="{ 'width': '100%' }"
      responsiveLayout="scroll"
      [hidden]="news().length === 0"
      [rowTrackBy]="trackByFn">
      <ng-template pTemplate="header">
        <tr>
          <th class="name-column">Nome</th>
          <th class="action-column">Azione</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-element>
        <tr>
          <td class="name-column" [title]="element.name">
            <div class="name-cell">{{element.name}}</div>
          </td>
          <td class="action-column">
            <button
              pButton
              icon="pi pi-search"
              class="p-button-rounded p-button-primary"
              (click)="doSearch(element.name)"
            ></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="2" class="text-center">Nessuna novità disponibile</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
